<!DOCTYPE html><html><head title="Deciphering life: One bit at a time"><meta charset="utf-8"><meta content="width=device-width, initiali-scale=1.0, user-scalable=yes" name="viewport"><link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="/css/smartphone.css" media="only screen and (max-device-width:480px)" rel="stylesheet" type="text/css"><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                           m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-43966261-1', 'rmflight.github.io');
ga('send', 'pageview');

</script></head><body><div class="container-fluid well"><h1>Deciphering life: One bit at a time</h1><p>Robert M Flight's home on the web</p></div><div class="subnav"><ul class="nav nav-pills"><li><a href="/index.html">Home</a></li><li><a href="/pages/about.html">About</a></li><li><a href="/pages/archive.html">Blog Archive</a></li><li><a href="https://github.com/rmflight/researchBlog">Blog Source</a></li><li><a href="https://github.com/rmflight?tab=repositories">Github Repos</a></li></ul></div><div class="container-fluid"><div class="row-fluid"><div class="span1"></div><div class="span9"><h1>Storing package data in custom environments</h1>

<p>If you do <code>R</code> package development, sometimes you want to be able to store variables specific to your package, without cluttering up the users workspace. One way to do this is by modifying the global <code>options</code>. This is done by packages <code>grDevices</code> and <code>parallel</code>. Sometimes this doesn&#39;t seem to work quite right (see this <a href="https://github.com/cboettig/knitcitations/issues/14">issue</a> for example.</p>

<p>Another way to do this is to create an environment within your package, that only package functions will be able to see, and therefore read from and modify. You get a space to put package specific stuff, the user can&#39;t see it or modify it directly, and you just need to write functions that do the appropriate things to that environment (adding variables, reading them, etc). This sounds great in practice, but I wasn&#39;t clear on how to do this, even after reading the <a href="http://stat.ethz.ch/R-manual/R-devel/library/base/html/environment.html">help page on environments</a>, the <a href="http://cran.r-project.org/doc/manuals/r-release/R-intro.html">R documentation</a>, or even <a href="https://github.com/hadley/devtools/wiki/Environments">Hadley&#39;s excellent writeup</a>. From all these sources, I could glean that one can create environments, name them, modify them, etc, but wasn&#39;t sure how to work with this within a package.</p>

<p>I checked out the <code>[knitcitations](https://github.com/cboettig/knitcitations)</code> package to see how it was done. When I looked, I realized that it was pretty obvious in retrospect. In <code>zzz.R</code>, initialize the environment, assigning it to a variable. When you need to work with the variables inside, this variable will be accessible to your package, and you simply use the <code>get</code> and <code>assign</code> functions like you would if you were doing anything on the command line.</p>

<p>To make sure I had it figured out, I created a very <a href="https://github.com/rmflight/testEnvironment">tiny package</a> to create a custom environment and functions for modifying it. Please feel free to examine, download, install (using <code>[devtools](https://github.com/hadley/devtools)]</code>) and see for yourself.</p>

<p>I have at least two projects where I know I will use this, and I&#39;m sure others might find it useful as well.</p>
<h6>Posted on 2013-05-30</h6><div id="disqus_thread"></div>
  <script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'decipheringlife'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div><div class="span2"><a class="twitter-timeline" href="https://twitter.com/rmflight" data-widget-id="368415899268558848">Tweets by @rmflight</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<h3>Tags</h3><ul><li><a href="/tags/R.html">R (7)</a></li><li><a href="/tags/hiveplot.html">hiveplot (1)</a></li><li><a href="/tags/cytoscape.html">cytoscape (1)</a></li><li><a href="/tags/literateprogramming.html">literateprogramming (1)</a></li><li><a href="/tags/writing.html">writing (1)</a></li><li><a href="/tags/package.html">package (1)</a></li><li><a href="/tags/timhortons.html">timhortons (1)</a></li><li><a href="/tags/mapping.html">mapping (1)</a></li><li><a href="/tags/teaching.html">teaching (1)</a></li><li><a href="/tags/notebook.html">notebook (1)</a></li><li><a href="/tags/openscience.html">openscience (1)</a></li><li><a href="/tags/reproducibility.html">reproducibility (1)</a></li><li><a href="/tags/moving.html">moving (2)</a></li><li><a href="/tags/setup.html">setup (1)</a></li><li><a href="/tags/Samatha.html">Samatha (3)</a></li><li><a href="/tags/tutorial.html">tutorial (1)</a></li><li><a href="/tags/twitter.html">twitter (1)</a></li><li><a href="/tags/bioconductor.html">bioconductor (1)</a></li><li><a href="/tags/rstudio.html">rstudio (1)</a></li><li><a href="/tags/postdoc.html">postdoc (1)</a></li><li><a href="/tags/academia.html">academia (1)</a></li><li><a href="/tags/science.html">science (1)</a></li></ul><h3>Blog Roll</h3><ul><li><a href="http://www.r-bloggers.com/">R bloggers</a></li><li><a href="http://ivory.idyll.org/blog/">Living in an Ivory Basement</a></li><li><a href="http://bytesizebio.net/">Byte Size Biology</a></li><li><a href="http://robjhyndman.com/hyndsight/">Hyndsight</a></li><li><a href="http://solomonmessing.wordpress.com/blog/">Solomon Messing</a></li><li><a href="http://nsaunders.wordpress.com/">What You're Doing Is Rather Desperate</a></li><li><a href="http://yihui.name/en/">Yihui Xie's Blog</a></li><li><a href="http://simplystatistics.org/">Simply Statistics</a></li><li><a href="http://software-carpentry.org/">Software carpentry</a></li></ul></div></div><div class="span12"><div class="span2"></div><div class="span8"><footer class="footer"><p class="right back_to_top"><a href="#">&uArr; Page Top</a></p><p><a href="https://github.com/DASpringate/samatha">Built in R with Samatha</a></p></footer></div></div></div></body></html>