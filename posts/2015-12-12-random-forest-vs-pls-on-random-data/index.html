<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Robert M Flight">
<meta name="dcterms.date" content="2015-12-12">

<title>Deciphering Life: One Bit at a Time - Random Forest vs PLS on Random Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Deciphering Life: One Bit at a Time</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rmflight"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://orcid.org/0000-0001-8141-7788">
 <span class="menu-text"><i class="ai  ai-orcid" title="" style="color:"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.social/@rmflight"><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Random Forest vs PLS on Random Data</h1>
            <p class="subtitle lead"></p><p>Comparing random-forest and partial-least-squares discriminant-analysis on random data to show the problems inherent in PLS-DA.</p><p></p>
                                <div class="quarto-categories">
                <div class="quarto-category">random-forest</div>
                <div class="quarto-category">machine-learning</div>
                <div class="quarto-category">partial-least-squares</div>
                <div class="quarto-category">statistics</div>
                <div class="quarto-category">analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Robert M Flight <a href="https://orcid.org/0000-0001-8141-7788" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 12, 2015</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#tldr" id="toc-tldr" class="nav-link active" data-scroll-target="#tldr">TL;DR</a></li>
  <li><a href="#why" id="toc-why" class="nav-link" data-scroll-target="#why">Why?</a></li>
  <li><a href="#random-data" id="toc-random-data" class="nav-link" data-scroll-target="#random-data">Random Data</a>
  <ul class="collapse">
  <li><a href="#feature-intensities" id="toc-feature-intensities" class="nav-link" data-scroll-target="#feature-intensities">Feature Intensities</a></li>
  </ul></li>
  <li><a href="#pca" id="toc-pca" class="nav-link" data-scroll-target="#pca">PCA</a></li>
  <li><a href="#random-forest" id="toc-random-forest" class="nav-link" data-scroll-target="#random-forest">Random Forest</a></li>
  <li><a href="#pls-da" id="toc-pls-da" class="nav-link" data-scroll-target="#pls-da">PLS-DA</a></li>
  <li><a href="#cross-validated-pls-da" id="toc-cross-validated-pls-da" class="nav-link" data-scroll-target="#cross-validated-pls-da">Cross-validated PLS-DA</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="tldr" class="level2">
<h2 class="anchored" data-anchor-id="tldr">TL;DR</h2>
<p>Partial least squares (PLS) discriminant-analysis (DA) can ridiculously over fit even on completely random data. The quality of the PLS-DA model can be assessed using cross-validation, but cross-validation is not typically performed in many metabolomics publications. Random forest, in contrast, because of the <em>forest</em> of decision tree learners, and the out-of-bag (OOB) samples used for testing each tree, automatically provides an indication of the quality of the model.</p>
</section>
<section id="why" class="level2">
<h2 class="anchored" data-anchor-id="why">Why?</h2>
<p>I’ve recently been working on some machine learning work using <strong>random forests</strong> (RF) <a href="https://www.stat.berkeley.edu/~breiman/randomforest2001.pdf">Breimann, 2001</a> on metabolomics data. This has been relatively successful, with decent sensitivity and specificity, and hopefully I’ll be able to post more soon. However, PLS (Wold, 1975) is a standard technique used in metabolomics due to the prevalence of analytical chemists in metabolomics and a long familiarity with the method. Importantly, my collaborators frequently use PLS-DA to generate plots to show that the various classes of samples are separable.</p>
<p>However, it has long been known that PLS (and all of it’s variants, PLS-DA, OPLS, OPLS-DA, etc) can easily generate models that over fit the data, and that over fitting of the model needs to be assessed if the model is going to be used in subsequent analyses.</p>
</section>
<section id="random-data" class="level2">
<h2 class="anchored" data-anchor-id="random-data">Random Data</h2>
<p>To illustrate the behavior of both RF and PLS-DA, we will generate some random data where each of the samples are randomly assigned to one of two classes.</p>
<section id="feature-intensities" class="level3">
<h3 class="anchored" data-anchor-id="feature-intensities">Feature Intensities</h3>
<p>We will generate a data set with 1000 features, where each feature’s mean value is from a uniform distribution with a range of 1-10000.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(cowplot<span class="sc">::</span><span class="fu">theme_cowplot</span>())</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fakeDataWithError)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>n_point <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>max_value <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>init_values <span class="ot">&lt;-</span> <span class="fu">runif</span>(n_point, <span class="dv">0</span>, max_value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>init_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">data =</span> init_values)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(init_data, <span class="fu">aes</span>(<span class="at">x =</span> data)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Initial Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_initial-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For each of these features, their distribution across samples will be based on a random normal distribution where the mean is the initial feature value and a standard deviation of 200. The number of samples is 100.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>n_sample <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>error_values <span class="ot">&lt;-</span> <span class="fu">add_uniform_noise</span>(n_sample, init_values, <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Just for information, the <code>add_uniform_noise</code> function is this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>add_uniform_noise</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (n_rep, value, sd, use_zero = FALSE) 
{
    n_value &lt;- length(value)
    n_sd &lt;- n_rep * n_value
    out_sd &lt;- rnorm(n_sd, 0, sd)
    out_sd &lt;- matrix(out_sd, nrow = n_value, ncol = n_rep)
    if (!use_zero) {
        tmp_value &lt;- matrix(value, nrow = n_value, ncol = n_rep, 
            byrow = FALSE)
        out_value &lt;- tmp_value + out_sd
    }
    else {
        out_value &lt;- out_sd
    }
    return(out_value)
}
&lt;bytecode: 0x557b6812fbf8&gt;
&lt;environment: namespace:fakeDataWithError&gt;</code></pre>
</div>
</div>
<p>I created it as part of a package that is able to add different kinds of noise to data.</p>
<p>The distribution of values for a single feature looks like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>error_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">feature_1 =</span> error_values[<span class="dv">1</span>,])</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(error_data, <span class="fu">aes</span>(<span class="at">x =</span> feature_1)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Error Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_error-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>And we will assign the first 50 samples to <strong>class_1</strong> and the second 50 samples to <strong>class_2</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>sample_class <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"class_1"</span>, <span class="st">"class_2"</span>), <span class="at">each =</span> <span class="dv">50</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>sample_class</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "class_1" "class_1" "class_1" "class_1" "class_1" "class_1" "class_1"
  [8] "class_1" "class_1" "class_1" "class_1" "class_1" "class_1" "class_1"
 [15] "class_1" "class_1" "class_1" "class_1" "class_1" "class_1" "class_1"
 [22] "class_1" "class_1" "class_1" "class_1" "class_1" "class_1" "class_1"
 [29] "class_1" "class_1" "class_1" "class_1" "class_1" "class_1" "class_1"
 [36] "class_1" "class_1" "class_1" "class_1" "class_1" "class_1" "class_1"
 [43] "class_1" "class_1" "class_1" "class_1" "class_1" "class_1" "class_1"
 [50] "class_1" "class_2" "class_2" "class_2" "class_2" "class_2" "class_2"
 [57] "class_2" "class_2" "class_2" "class_2" "class_2" "class_2" "class_2"
 [64] "class_2" "class_2" "class_2" "class_2" "class_2" "class_2" "class_2"
 [71] "class_2" "class_2" "class_2" "class_2" "class_2" "class_2" "class_2"
 [78] "class_2" "class_2" "class_2" "class_2" "class_2" "class_2" "class_2"
 [85] "class_2" "class_2" "class_2" "class_2" "class_2" "class_2" "class_2"
 [92] "class_2" "class_2" "class_2" "class_2" "class_2" "class_2" "class_2"
 [99] "class_2" "class_2"</code></pre>
</div>
</div>
</section>
</section>
<section id="pca" class="level2">
<h2 class="anchored" data-anchor-id="pca">PCA</h2>
<p>Just to show that the data is pretty random, lets use principal components analysis (PCA) to do a decomposition, and plot the first two components:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>tmp_pca <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(<span class="fu">t</span>(error_values), <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale. =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>pca_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tmp_pca<span class="sc">$</span>x[, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>pca_data<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(sample_class)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pca_data, <span class="fu">aes</span>(<span class="at">x =</span> PC1, <span class="at">y =</span> PC2, <span class="at">color =</span> class)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/pca_data-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="random-forest" class="level2">
<h2 class="anchored" data-anchor-id="random-forest">Random Forest</h2>
<p>Let’s use RF first, and see how things look.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>randomForest 4.7-1.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Type rfNews() to see new features/changes/bug fixes.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'randomForest'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:ggplot2':

    margin</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(<span class="fu">t</span>(error_values), <span class="at">y =</span> <span class="fu">as.factor</span>(sample_class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The confusion matrix comparing actual <em>vs</em> predicted classes based on the out of bag (OOB) samples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(rf_model<span class="sc">$</span>confusion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">class_1</th>
<th style="text-align: right;">class_2</th>
<th style="text-align: right;">class.error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">class_1</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">0.58</td>
</tr>
<tr class="even">
<td style="text-align: left;">class_2</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">0.56</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>And an overall error of 0.5760364.</p>
</section>
<section id="pls-da" class="level2">
<h2 class="anchored" data-anchor-id="pls-da">PLS-DA</h2>
<p>So PLS-DA is really just PLS with <strong>y</strong> variable that is binary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: lattice</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>pls_model <span class="ot">&lt;-</span> <span class="fu">plsda</span>(<span class="fu">t</span>(error_values), <span class="fu">as.factor</span>(sample_class), <span class="at">ncomp =</span> <span class="dv">2</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>pls_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">comp1 =</span> pls_model<span class="sc">$</span>scores[,<span class="dv">1</span>], <span class="at">comp2 =</span> pls_model<span class="sc">$</span>scores[,<span class="dv">2</span>], <span class="at">class =</span> sample_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And plot the PLS scores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pls_scores, <span class="fu">aes</span>(<span class="at">x =</span> comp1, <span class="at">y =</span> comp2, <span class="at">color =</span> class)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"PLS-DA of Random Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_plsda-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>And voila! Perfectly separated data! If I didn’t tell you that it was random, would you suspect it?</p>
</section>
<section id="cross-validated-pls-da" class="level2">
<h2 class="anchored" data-anchor-id="cross-validated-pls-da">Cross-validated PLS-DA</h2>
<p>Of course, one way to truly assess the worth of the model would be to use cross-validation, where a fraction of data is held back, and the model trained on the rest. Predictions are then made on the held back fraction, and because we know the truth, we will then calculate the <strong>area under the reciever operator curve</strong> (AUROC) or area under the curve (AUC) created by plotting true positives <em>vs</em> false positives.</p>
<p>To do this we will need two functions:</p>
<ol type="1">
<li>Generates all of the CV folds</li>
<li>Generates PLS-DA model, does prediction on hold out, calculates AUC</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cvTools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: robustbase</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ROCR)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>gen_cv <span class="ot">&lt;-</span> <span class="cf">function</span>(xdata, ydata, nrep, kfold){</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  n_sample <span class="ot">&lt;-</span> <span class="fu">length</span>(ydata)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  all_index <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, n_sample)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  cv_data <span class="ot">&lt;-</span> <span class="fu">cvFolds</span>(n_sample, <span class="at">K =</span> kfold, <span class="at">R =</span> nrep, <span class="at">type =</span> <span class="st">"random"</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  rep_values <span class="ot">&lt;-</span> <span class="fu">vapply</span>(<span class="fu">seq</span>(<span class="dv">1</span>, nrep), <span class="cf">function</span>(in_rep){</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    use_rep <span class="ot">&lt;-</span> cv_data<span class="sc">$</span>subsets[, in_rep]</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    cv_values <span class="ot">&lt;-</span> <span class="fu">vapply</span>(<span class="fu">seq</span>(<span class="dv">1</span>, kfold), <span class="cf">function</span>(in_fold){</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>      test_index <span class="ot">&lt;-</span> use_rep[cv_data<span class="sc">$</span>which <span class="sc">==</span> in_fold]</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>      train_index <span class="ot">&lt;-</span> all_index[<span class="sc">-</span>test_index]</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plsda_cv</span>(xdata[train_index, ], ydata[train_index], xdata[test_index, ],</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>               ydata[test_index])</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    }, <span class="fu">numeric</span>(<span class="dv">1</span>))</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  }, <span class="fu">numeric</span>(kfold))</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>plsda_cv <span class="ot">&lt;-</span> <span class="cf">function</span>(xtrain, ytrain, xtest, ytest){</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>  pls_model <span class="ot">&lt;-</span> <span class="fu">plsda</span>(xtrain, ytrain, <span class="at">ncomp =</span> <span class="dv">2</span>)</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  pls_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(pls_model, xtest, <span class="at">type =</span> <span class="st">"prob"</span>)</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  use_pred <span class="ot">&lt;-</span> pls_pred[, <span class="dv">2</span>, <span class="dv">1</span>]</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>  pred_perf <span class="ot">&lt;-</span> ROCR<span class="sc">::</span><span class="fu">prediction</span>(use_pred, ytest)</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>  pred_auc <span class="ot">&lt;-</span> ROCR<span class="sc">::</span><span class="fu">performance</span>(pred_perf, <span class="st">"auc"</span>)<span class="sc">@</span>y.values[[<span class="dv">1</span>]]</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(pred_auc)</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And now lets do a bunch of replicates (100).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>cv_vals <span class="ot">&lt;-</span> <span class="fu">gen_cv</span>(<span class="fu">t</span>(error_values), <span class="fu">factor</span>(sample_class), <span class="at">nrep =</span> <span class="dv">100</span>, <span class="at">kfold =</span> <span class="dv">5</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cv_vals)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4260387</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(cv_vals)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1188491</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>cv_frame <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">auc =</span> <span class="fu">as.vector</span>(cv_vals))</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cv_frame, <span class="fu">aes</span>(<span class="at">x =</span> auc)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/rep_plsda-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>So we get an average AUC of 0.4260387, which is pretty awful. This implies that even though there was good separation on the scores, maybe the model is not actually that good, and we should be cautious of any predictions being made.</p>
<p>Of course, the PCA at the beginning of the analysis shows that there is no <em>real</em> separation in the data in the first place.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">session_info</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.2.1 (2022-06-23)
 os       Pop!_OS 22.04 LTS
 system   x86_64, linux-gnu
 ui       X11
 language en_US:en
 collate  en_US.UTF-8
 ctype    en_US.UTF-8
 tz       America/New_York
 date     2022-12-02
 pandoc   2.19.2 @ /usr/lib/rstudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)

─ Packages ───────────────────────────────────────────────────────────────────
 ! package           * version    date (UTC) lib source
   assertthat          0.2.1      2019-03-21 [2] CRAN (R 4.2.1)
 P cachem              1.0.6      2021-08-19 [?] CRAN (R 4.2.1)
   callr               3.7.2      2022-08-22 [2] CRAN (R 4.2.1)
 P caret             * 6.0-93     2022-08-09 [?] CRAN (R 4.2.1)
 P class               7.3-20     2022-01-13 [?] CRAN (R 4.2.1)
   cli                 3.4.0      2022-09-08 [2] CRAN (R 4.2.1)
   codetools           0.2-18     2020-11-04 [2] CRAN (R 4.2.1)
   colorspace          2.0-3      2022-02-21 [2] CRAN (R 4.2.1)
   cowplot             1.1.1      2020-12-30 [2] CRAN (R 4.2.1)
   crayon              1.5.1      2022-03-26 [2] CRAN (R 4.2.1)
 P cvTools           * 0.3.2      2012-05-14 [?] CRAN (R 4.2.1)
   data.table          1.14.2     2021-09-27 [2] CRAN (R 4.2.1)
   DBI                 1.1.3      2022-06-18 [2] CRAN (R 4.2.1)
   DEoptimR            1.0-11     2022-04-03 [2] CRAN (R 4.2.1)
   devtools            2.4.4      2022-07-20 [2] CRAN (R 4.2.1)
 P digest              0.6.29     2021-12-01 [?] CRAN (R 4.2.1)
   dplyr               1.0.10     2022-09-01 [2] CRAN (R 4.2.1)
   ellipsis            0.3.2      2021-04-29 [2] CRAN (R 4.2.1)
 P evaluate            0.16       2022-08-09 [?] CRAN (R 4.2.1)
   fakeDataWithError * 0.0.1      2022-12-02 [1] Github (rmflight/fakeDataWithError@ccd8714)
   fansi               1.0.3      2022-03-24 [2] CRAN (R 4.2.1)
   farver              2.1.1      2022-07-06 [2] CRAN (R 4.2.1)
 P fastmap             1.1.0      2021-01-25 [?] CRAN (R 4.2.1)
   foreach             1.5.2      2022-02-02 [2] CRAN (R 4.2.1)
 P fs                  1.5.2      2021-12-08 [?] CRAN (R 4.2.1)
   future              1.28.0     2022-09-02 [2] CRAN (R 4.2.1)
 P future.apply        1.10.0     2022-11-05 [?] CRAN (R 4.2.1)
   generics            0.1.3      2022-07-05 [2] CRAN (R 4.2.1)
 P ggplot2           * 3.4.0      2022-11-04 [?] CRAN (R 4.2.1)
   globals             0.16.1     2022-08-28 [2] CRAN (R 4.2.1)
 P glue                1.6.2      2022-02-24 [?] CRAN (R 4.2.1)
 P gower               1.0.0      2022-02-03 [?] CRAN (R 4.2.1)
   gtable              0.3.1      2022-09-01 [2] CRAN (R 4.2.1)
 P hardhat             1.2.0      2022-06-30 [?] CRAN (R 4.2.1)
 P highr               0.9        2021-04-16 [?] CRAN (R 4.2.1)
 P htmltools           0.5.3      2022-07-18 [?] CRAN (R 4.2.1)
   htmlwidgets         1.5.4      2021-09-08 [2] CRAN (R 4.2.1)
   httpuv              1.6.6      2022-09-08 [2] CRAN (R 4.2.1)
 P ipred               0.9-13     2022-06-02 [?] CRAN (R 4.2.1)
   iterators           1.0.14     2022-02-05 [2] CRAN (R 4.2.1)
 P jsonlite            1.8.0      2022-02-22 [?] CRAN (R 4.2.1)
 P knitr               1.40       2022-08-24 [?] CRAN (R 4.2.1)
   labeling            0.4.2      2020-10-20 [2] CRAN (R 4.2.1)
   later               1.3.0      2021-08-18 [2] CRAN (R 4.2.1)
   lattice           * 0.20-45    2021-09-22 [2] CRAN (R 4.2.1)
 P lava                1.7.0      2022-10-25 [?] CRAN (R 4.2.1)
 P lifecycle           1.0.3      2022-10-07 [?] CRAN (R 4.2.1)
   listenv             0.8.0      2019-12-05 [2] CRAN (R 4.2.1)
   lubridate           1.8.0      2021-10-07 [2] CRAN (R 4.2.1)
 P magrittr            2.0.3      2022-03-30 [?] CRAN (R 4.2.1)
   MASS                7.3-58.1   2022-08-03 [2] CRAN (R 4.2.1)
   Matrix              1.4-1      2022-03-23 [2] CRAN (R 4.2.1)
 P memoise             2.0.1      2021-11-26 [?] CRAN (R 4.2.1)
   mime                0.12       2021-09-28 [2] CRAN (R 4.2.1)
   miniUI              0.1.1.1    2018-05-18 [2] CRAN (R 4.2.1)
 P ModelMetrics        1.2.2.2    2020-03-17 [?] CRAN (R 4.2.1)
   munsell             0.5.0      2018-06-12 [2] CRAN (R 4.2.1)
   nlme                3.1-159    2022-08-09 [2] CRAN (R 4.2.1)
 P nnet                7.3-18     2022-09-28 [?] CRAN (R 4.2.1)
   parallelly          1.32.1     2022-07-21 [2] CRAN (R 4.2.1)
   pillar              1.8.1      2022-08-19 [2] CRAN (R 4.2.1)
   pkgbuild            1.3.1      2021-12-20 [2] CRAN (R 4.2.1)
   pkgconfig           2.0.3      2019-09-22 [2] CRAN (R 4.2.1)
   pkgload             1.3.0      2022-06-27 [2] CRAN (R 4.2.1)
 P pls                 2.8-1      2022-07-16 [?] CRAN (R 4.2.1)
   plyr                1.8.7      2022-03-24 [2] CRAN (R 4.2.1)
   prettyunits         1.1.1      2020-01-24 [2] CRAN (R 4.2.1)
 P pROC                1.18.0     2021-09-03 [?] CRAN (R 4.2.1)
   processx            3.7.0      2022-07-07 [2] CRAN (R 4.2.1)
 P prodlim             2019.11.13 2019-11-17 [?] CRAN (R 4.2.1)
   profvis             0.3.7      2020-11-02 [2] CRAN (R 4.2.1)
   promises            1.2.0.1    2021-02-11 [2] CRAN (R 4.2.1)
   ps                  1.7.1      2022-06-18 [2] CRAN (R 4.2.1)
   purrr               0.3.4      2020-04-17 [2] CRAN (R 4.2.1)
 P R6                  2.5.1      2021-08-19 [?] CRAN (R 4.2.1)
 P randomForest      * 4.7-1.1    2022-05-23 [?] CRAN (R 4.2.1)
   Rcpp                1.0.9      2022-07-08 [2] CRAN (R 4.2.1)
 P recipes             1.0.3      2022-11-09 [?] CRAN (R 4.2.1)
   remotes             2.4.2      2021-11-30 [2] CRAN (R 4.2.1)
   renv                0.15.5     2022-05-26 [1] CRAN (R 4.2.1)
 P reshape2            1.4.4      2020-04-09 [?] CRAN (R 4.2.1)
 P rlang               1.0.6      2022-09-24 [?] CRAN (R 4.2.1)
 P rmarkdown           2.16       2022-08-24 [?] CRAN (R 4.2.1)
   robustbase        * 0.95-0     2022-04-02 [2] CRAN (R 4.2.1)
 P ROCR              * 1.0-11     2020-05-02 [?] CRAN (R 4.2.1)
 P rpart               4.1.19     2022-10-21 [?] CRAN (R 4.2.1)
   rstudioapi          0.14       2022-08-22 [2] CRAN (R 4.2.1)
   scales              1.2.1      2022-08-20 [2] CRAN (R 4.2.1)
   sessioninfo         1.2.2      2021-12-06 [2] CRAN (R 4.2.1)
   shiny               1.7.2      2022-07-19 [2] CRAN (R 4.2.1)
 P stringi             1.7.8      2022-07-11 [?] CRAN (R 4.2.1)
 P stringr             1.4.1      2022-08-20 [?] CRAN (R 4.2.1)
 P survival            3.4-0      2022-08-09 [?] CRAN (R 4.2.1)
   tibble              3.1.8      2022-07-22 [2] CRAN (R 4.2.1)
 P tidyselect          1.2.0      2022-10-10 [?] CRAN (R 4.2.1)
 P timeDate            4021.106   2022-09-30 [?] CRAN (R 4.2.1)
   urlchecker          1.0.1      2021-11-30 [2] CRAN (R 4.2.1)
   usethis             2.1.6      2022-05-25 [2] CRAN (R 4.2.1)
   utf8                1.2.2      2021-07-24 [2] CRAN (R 4.2.1)
 P vctrs               0.5.1      2022-11-16 [?] CRAN (R 4.2.1)
   withr               2.5.0      2022-03-03 [2] CRAN (R 4.2.1)
 P xfun                0.33       2022-09-12 [?] CRAN (R 4.2.1)
   xtable              1.8-4      2019-04-21 [2] CRAN (R 4.2.1)
 P yaml                2.3.5      2022-02-21 [?] CRAN (R 4.2.1)

 [1] /home/rmflight/Projects/personal/researchblog_quarto/renv/library/R-4.2/x86_64-pc-linux-gnu
 [2] /rmflight_stuff/software/R-4.2.1/library

 P ── Loaded and on-disk path mismatch.

──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{mflight2015,
  author = {Robert M Flight},
  title = {Random {Forest} Vs {PLS} on {Random} {Data}},
  date = {2015-12-12},
  url = {https://rmflight.github.io/posts/2015-12-12-random-forest-vs-pls-on-random-data},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-mflight2015" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
Robert M Flight. 2015. <span>“Random Forest Vs PLS on Random
Data.”</span> December 12, 2015. <a href="https://rmflight.github.io/posts/2015-12-12-random-forest-vs-pls-on-random-data">https://rmflight.github.io/posts/2015-12-12-random-forest-vs-pls-on-random-data</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>